---
layout:     post
title:      const,static,inline
subtitle:   const,static,inline
date:       2023-05-18
author:     xc
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - c++
---

# const,static,inline

## inline

函数调用是有时间和空间开销的。程序在执行一个函数之前需要做一些准备工作，要将实参、局部变量、返回地址以及若干寄存器都压入栈中，然后才能执行函数体中的代码；函数体中的代码执行完毕后还要清理现场，将之前压入栈中的数据都出栈，才能接着执行函数调用位置以后的代码。

如果函数体代码比较多，需要较长的执行时间，那么函数调用机制占用的时间可以忽略；如果函数只有一两条语句，那么大部分的时间都会花费在函数调用机制上，这种时间开销就就不容忽视。

为了消除函数调用的时空开销，C++ 提供一种提高效率的方法，即在编译时将函数调用处用函数体替换，类似于C语言中的宏展开。这种在函数调用处直接嵌入函数体的函数称为内联函数（Inline Function），又称内嵌函数或者内置函数。

## const
const 关键字指定变量的值是常量，并通知编译器防止程序员修改它。比起 #define 来说，const 有类型检查。

在 C语言中，const 修饰的常量值默认为外部链接，因此它们只能出现在源文件中。 在 C++ 中，常量值默认为内部链接，这使它们可以出现在头文件中。

## static
static 用于创建一个静态持续时间的变量，被 static 修饰的变量会在静态区中（全局变量也在静态区中），在整个程序的生存时间内都存在。

如果是在函数内定义的 static 变量，那么即使在函数外，这个变量依旧存在（但只能在其作用域内使用）。

未赋值的 static 变量会被被初始化为 0，static 修饰的变量具有内部链接性，无法在其他文件使用。如果用 static 修饰一个全局变量的话，那么它的作用就是限制这个变量只能在当前文件（模块）使用。